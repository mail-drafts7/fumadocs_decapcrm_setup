---
title: API Contract
description: Complete API reference and contract specifications for Knowledge Pack - comprehensive endpoints, authentication, and integration guide
---

# API Contract

The Knowledge Pack API provides a comprehensive set of endpoints for managing documentation, search functionality, user management, and content operations. This guide covers all available endpoints, authentication methods, request/response formats, and integration examples.

## API Overview

### Base Information

- **Base URL**: `https://api.knowledgepack.com/v1`
- **Protocol**: HTTPS only
- **Content-Type**: `application/json`
- **Rate Limiting**: 1000 requests per hour (authenticated), 100 requests per hour (anonymous)
- **API Version**: v1 (current), v2 (beta)

### Response Format

All API responses follow a consistent format:

```json
{
  "success": true,
  "data": {
    // Response data
  },
  "pagination": {
    "page": 1,
    "limit": 20,
    "total": 150,
    "totalPages": 8
  },
  "meta": {
    "requestId": "req_1234567890",
    "timestamp": "2023-10-08T09:20:00Z",
    "version": "v1"
  }
}
```

### Error Format

Error responses include detailed information:

```json
{
  "success": false,
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Invalid request parameters",
    "details": [
      {
        "field": "title",
        "message": "Title is required",
        "code": "REQUIRED_FIELD"
      }
    ],
    "documentation": "https://docs.knowledgepack.com/api/errors#validation"
  },
  "meta": {
    "requestId": "req_1234567890",
    "timestamp": "2023-10-08T09:20:00Z"
  }
}
```

## Authentication

### API Keys

Generate API keys in your dashboard and include them in requests:

```bash
# Header-based authentication (recommended)
Authorization: Bearer YOUR_API_KEY

# Query parameter authentication (for webhooks only)
GET /api/v1/documents?api_key=YOUR_API_KEY
```

### JWT Tokens

For user-specific operations, use JWT tokens:

```bash
# Login to get JWT token
POST /auth/login
{
  "email": "user@example.com",
  "password": "password123"
}

# Response
{
  "success": true,
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "refreshToken": "refresh_token_here",
    "expiresIn": 3600
  }
}

# Use token in subsequent requests
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

### OAuth 2.0

For third-party integrations:

```bash
# OAuth 2.0 flow
GET /oauth/authorize?client_id=YOUR_CLIENT_ID&redirect_uri=YOUR_REDIRECT_URI&response_type=code&scope=read:docs%20write:docs

# Exchange code for token
POST /oauth/token
{
  "grant_type": "authorization_code",
  "code": "AUTHORIZATION_CODE",
  "client_id": "YOUR_CLIENT_ID",
  "client_secret": "YOUR_CLIENT_SECRET",
  "redirect_uri": "YOUR_REDIRECT_URI"
}
```

## Core Endpoints

### Documents API

#### List Documents

```http
GET /documents
```

**Parameters:**
- `page` (optional): Page number (default: 1)
- `limit` (optional): Items per page (default: 20, max: 100)
- `category` (optional): Filter by category
- `status` (optional): Filter by status (`draft`, `published`, `archived`)
- `search` (optional): Search in title and content
- `sort` (optional): Sort by (`created_at`, `updated_at`, `title`)
- `order` (optional): Order (`asc`, `desc`)

**Example Request:**

```bash
curl -X GET "https://api.knowledgepack.com/v1/documents?page=1&limit=10&category=guides&status=published" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json"
```

**Example Response:**

```json
{
  "success": true,
  "data": [
    {
      "id": "doc_1234567890",
      "title": "Getting Started Guide",
      "slug": "getting-started",
      "content": "# Getting Started\n\nWelcome to...",
      "excerpt": "Learn how to get started with Knowledge Pack",
      "category": "guides",
      "status": "published",
      "author": {
        "id": "user_123",
        "name": "John Doe",
        "email": "john@example.com"
      },
      "tags": ["guide", "beginner", "setup"],
      "metadata": {
        "readTime": 5,
        "wordCount": 1250
      },
      "createdAt": "2023-10-01T10:00:00Z",
      "updatedAt": "2023-10-08T09:15:00Z",
      "publishedAt": "2023-10-01T12:00:00Z"
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 10,
    "total": 45,
    "totalPages": 5
  }
}
```

#### Get Single Document

```http
GET /documents/{id}
```

**Parameters:**
- `include` (optional): Include related data (`author`, `comments`, `analytics`)
- `format` (optional): Response format (`json`, `markdown`, `html`)

**Example Request:**

```bash
curl -X GET "https://api.knowledgepack.com/v1/documents/doc_1234567890?include=author,analytics" \
  -H "Authorization: Bearer YOUR_API_KEY"
```

#### Create Document

```http
POST /documents
```

**Request Body:**

```json
{
  "title": "New Documentation Page",
  "slug": "new-documentation-page",
  "content": "# New Documentation\n\nThis is the content...",
  "excerpt": "Brief description of the document",
  "category": "guides",
  "status": "draft",
  "tags": ["new", "documentation"],
  "metadata": {
    "author": "user_123",
    "template": "guide",
    "seoTitle": "Custom SEO Title",
    "seoDescription": "Custom SEO description"
  },
  "publishAt": "2023-10-10T12:00:00Z"
}
```

**Example Response:**

```json
{
  "success": true,
  "data": {
    "id": "doc_9876543210",
    "title": "New Documentation Page",
    "slug": "new-documentation-page",
    "status": "draft",
    "createdAt": "2023-10-08T09:30:00Z",
    "url": "https://docs.example.com/new-documentation-page"
  }
}
```

#### Update Document

```http
PUT /documents/{id}
PATCH /documents/{id}
```

**Request Body (PATCH example):**

```json
{
  "title": "Updated Title",
  "status": "published",
  "tags": ["updated", "documentation", "guide"]
}
```

#### Delete Document

```http
DELETE /documents/{id}
```

**Parameters:**
- `force` (optional): Permanently delete (default: false, moves to trash)

### Search API

#### Search Documents

```http
GET /search
```

**Parameters:**
- `q` (required): Search query
- `limit` (optional): Number of results (default: 10, max: 50)
- `offset` (optional): Pagination offset
- `category` (optional): Filter by category
- `type` (optional): Content type (`document`, `page`, `all`)
- `highlight` (optional): Enable search term highlighting (default: true)

**Example Request:**

```bash
curl -X GET "https://api.knowledgepack.com/v1/search?q=getting%20started&limit=10&highlight=true" \
  -H "Authorization: Bearer YOUR_API_KEY"
```

**Example Response:**

```json
{
  "success": true,
  "data": {
    "query": "getting started",
    "results": [
      {
        "id": "doc_1234567890",
        "title": "Getting Started Guide",
        "slug": "getting-started",
        "excerpt": "Learn how to get <mark>started</mark> with Knowledge Pack",
        "category": "guides",
        "score": 0.95,
        "highlights": [
          "Learn how to get <mark>started</mark> with Knowledge Pack",
          "<mark>Getting</mark> up and running is easy with our guide"
        ],
        "url": "/getting-started"
      }
    ],
    "totalResults": 15,
    "searchTime": 0.045,
    "suggestions": [
      "getting started guide",
      "start documentation"
    ]
  }
}
```

#### Search Suggestions

```http
GET /search/suggestions
```

**Parameters:**
- `q` (required): Partial search query
- `limit` (optional): Number of suggestions (default: 5)

### Categories API

#### List Categories

```http
GET /categories
```

**Example Response:**

```json
{
  "success": true,
  "data": [
    {
      "id": "cat_guides",
      "name": "Guides",
      "slug": "guides",
      "description": "Step-by-step guides and tutorials",
      "documentCount": 25,
      "color": "#3b82f6",
      "icon": "book",
      "order": 1
    },
    {
      "id": "cat_api",
      "name": "API Reference",
      "slug": "api-reference",
      "description": "Complete API documentation",
      "documentCount": 12,
      "color": "#10b981",
      "icon": "code",
      "order": 2
    }
  ]
}
```

#### Create Category

```http
POST /categories
```

**Request Body:**

```json
{
  "name": "New Category",
  "slug": "new-category",
  "description": "Description of the new category",
  "color": "#8b5cf6",
  "icon": "folder"
}
```

### Users API

#### Get Current User

```http
GET /users/me
```

**Example Response:**

```json
{
  "success": true,
  "data": {
    "id": "user_123",
    "name": "John Doe",
    "email": "john@example.com",
    "avatar": "https://cdn.example.com/avatars/john.jpg",
    "role": "editor",
    "permissions": [
      "read:documents",
      "write:documents",
      "delete:own_documents"
    ],
    "preferences": {
      "theme": "dark",
      "language": "en",
      "emailNotifications": true
    },
    "stats": {
      "documentsCreated": 15,
      "documentsEdited": 42,
      "lastActive": "2023-10-08T09:00:00Z"
    }
  }
}
```

#### Update User Profile

```http
PATCH /users/me
```

**Request Body:**

```json
{
  "name": "John Smith",
  "preferences": {
    "theme": "light",
    "emailNotifications": false
  }
}
```

### Analytics API

#### Get Document Analytics

```http
GET /analytics/documents/{id}
```

**Parameters:**
- `period` (optional): Time period (`7d`, `30d`, `90d`, `1y`)
- `metrics` (optional): Specific metrics (`views`, `time_spent`, `bounce_rate`)

**Example Response:**

```json
{
  "success": true,
  "data": {
    "documentId": "doc_1234567890",
    "period": "30d",
    "metrics": {
      "totalViews": 1250,
      "uniqueVisitors": 890,
      "averageTimeSpent": 245,
      "bounceRate": 0.35,
      "topReferrers": [
        {
          "source": "google.com",
          "visits": 456
        },
        {
          "source": "direct",
          "visits": 234
        }
      ],
      "dailyViews": [
        {
          "date": "2023-10-01",
          "views": 45
        }
      ]
    }
  }
}
```

## Advanced Features

### Webhooks

#### Register Webhook

```http
POST /webhooks
```

**Request Body:**

```json
{
  "url": "https://your-app.com/webhook",
  "events": [
    "document.created",
    "document.updated",
    "document.published",
    "document.deleted"
  ],
  "secret": "your_webhook_secret",
  "active": true
}
```

#### Webhook Payload Example

```json
{
  "event": "document.published",
  "timestamp": "2023-10-08T09:30:00Z",
  "data": {
    "document": {
      "id": "doc_1234567890",
      "title": "Getting Started Guide",
      "slug": "getting-started",
      "status": "published",
      "publishedAt": "2023-10-08T09:30:00Z"
    }
  },
  "signature": "sha256=5d41402abc4b2a76b9719d911017c592"
}
```

### Bulk Operations

#### Bulk Create Documents

```http
POST /documents/bulk
```

**Request Body:**

```json
{
  "documents": [
    {
      "title": "Document 1",
      "content": "Content for document 1",
      "category": "guides"
    },
    {
      "title": "Document 2",
      "content": "Content for document 2",
      "category": "tutorials"
    }
  ],
  "options": {
    "skipValidation": false,
    "publishImmediately": false
  }
}
```

#### Bulk Update Documents

```http
PATCH /documents/bulk
```

**Request Body:**

```json
{
  "filter": {
    "category": "guides",
    "status": "draft"
  },
  "updates": {
    "status": "published",
    "tags": ["updated"]
  }
}
```

### File Upload API

#### Upload File

```http
POST /files
```

**Request (multipart/form-data):**

```bash
curl -X POST "https://api.knowledgepack.com/v1/files" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -F "file=@/path/to/file.pdf" \
  -F "category=attachments" \
  -F "description=User manual PDF"
```

**Response:**

```json
{
  "success": true,
  "data": {
    "id": "file_1234567890",
    "filename": "user-manual.pdf",
    "originalName": "User Manual v2.1.pdf",
    "mimeType": "application/pdf",
    "size": 2048576,
    "url": "https://cdn.knowledgepack.com/files/user-manual.pdf",
    "category": "attachments",
    "uploadedAt": "2023-10-08T09:35:00Z"
  }
}
```

## SDKs and Libraries

### JavaScript/Node.js

```bash
npm install @knowledgepack/api
```

```javascript
import KnowledgePack from '@knowledgepack/api';

const kp = new KnowledgePack({
  apiKey: 'your-api-key',
  baseUrl: 'https://api.knowledgepack.com/v1'
});

// Get documents
const documents = await kp.documents.list({
  category: 'guides',
  limit: 10
});

// Create document
const newDoc = await kp.documents.create({
  title: 'New Guide',
  content: '# New Guide\n\nContent here...',
  category: 'guides'
});

// Search
const results = await kp.search.query('getting started');
```

### Python

```bash
pip install knowledgepack
```

```python
from knowledgepack import KnowledgePackAPI

kp = KnowledgePackAPI(api_key='your-api-key')

# Get documents
documents = kp.documents.list(category='guides', limit=10)

# Create document
new_doc = kp.documents.create(
    title='New Guide',
    content='# New Guide\n\nContent here...',
    category='guides'
)

# Search
results = kp.search.query('getting started')
```

### PHP

```bash
composer require knowledgepack/api
```

```php
<?php
require_once 'vendor/autoload.php';

use KnowledgePack\API\Client;

$kp = new Client(['api_key' => 'your-api-key']);

// Get documents
$documents = $kp->documents->list([
    'category' => 'guides',
    'limit' => 10
]);

// Create document
$newDoc = $kp->documents->create([
    'title' => 'New Guide',
    'content' => '# New Guide\n\nContent here...',
    'category' => 'guides'
]);
```

### cURL Examples

#### Basic GET Request

```bash
curl -X GET "https://api.knowledgepack.com/v1/documents" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json"
```

#### POST Request with JSON

```bash
curl -X POST "https://api.knowledgepack.com/v1/documents" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "New Document",
    "content": "Document content here",
    "category": "guides"
  }'
```

## Status Codes

### Success Codes

- **200 OK**: Request successful
- **201 Created**: Resource created successfully
- **202 Accepted**: Request accepted for processing
- **204 No Content**: Request successful, no content returned

### Client Error Codes

- **400 Bad Request**: Invalid request syntax or parameters
- **401 Unauthorized**: Authentication required or invalid
- **403 Forbidden**: Insufficient permissions
- **404 Not Found**: Resource not found
- **409 Conflict**: Resource conflict (duplicate, etc.)
- **422 Unprocessable Entity**: Validation errors
- **429 Too Many Requests**: Rate limit exceeded

### Server Error Codes

- **500 Internal Server Error**: Server error
- **502 Bad Gateway**: Gateway error
- **503 Service Unavailable**: Service temporarily unavailable
- **504 Gateway Timeout**: Gateway timeout

## Rate Limiting

### Rate Limit Headers

Every response includes rate limit information:

```http
X-RateLimit-Limit: 1000
X-RateLimit-Remaining: 999
X-RateLimit-Reset: 1696766400
X-RateLimit-Window: 3600
```

### Rate Limit Plans

| Plan | Rate Limit | Burst Limit |
|------|------------|-------------|
| Free | 100/hour | 10/minute |
| Pro | 1,000/hour | 100/minute |
| Enterprise | 10,000/hour | 1,000/minute |
| Custom | Negotiable | Negotiable |

### Handling Rate Limits

```javascript
try {
  const response = await fetch('/api/documents', {
    headers: {
      'Authorization': 'Bearer YOUR_API_KEY'
    }
  });
  
  if (response.status === 429) {
    const resetTime = response.headers.get('X-RateLimit-Reset');
    console.log(`Rate limit exceeded. Reset at: ${new Date(resetTime * 1000)}`);
    // Implement exponential backoff
  }
} catch (error) {
  console.error('API Error:', error);
}
```

## Best Practices

### API Design Principles

1. **Idempotency**: PUT and DELETE operations are idempotent
2. **Versioning**: API versioned through URL path (`/v1/`, `/v2/`)
3. **Filtering**: Use query parameters for filtering and searching
4. **Pagination**: Cursor-based pagination for large datasets
5. **Caching**: ETags and Last-Modified headers for caching

### Security Best Practices

1. **Use HTTPS**: All API calls must use HTTPS
2. **Validate Input**: Always validate and sanitize input data
3. **Rate Limiting**: Implement proper rate limiting
4. **API Keys**: Rotate API keys regularly
5. **Webhook Security**: Validate webhook signatures

### Performance Optimization

1. **Pagination**: Always paginate large result sets
2. **Field Selection**: Use `fields` parameter to limit returned data
3. **Caching**: Cache responses where appropriate
4. **Batch Operations**: Use bulk endpoints for multiple operations
5. **Compression**: Enable gzip compression

### Error Handling

```javascript
// Comprehensive error handling example
async function handleAPICall() {
  try {
    const response = await kp.documents.create({
      title: 'New Document',
      content: 'Content here'
    });
    
    return response;
  } catch (error) {
    if (error.code === 'VALIDATION_ERROR') {
      // Handle validation errors
      console.error('Validation failed:', error.details);
    } else if (error.code === 'RATE_LIMIT_EXCEEDED') {
      // Handle rate limiting
      const retryAfter = error.retryAfter;
      console.log(`Rate limited. Retry after ${retryAfter} seconds`);
    } else if (error.status >= 500) {
      // Handle server errors
      console.error('Server error:', error.message);
    } else {
      // Handle other errors
      console.error('API error:', error.message);
    }
    
    throw error;
  }
}
```

## Testing and Development

### Postman Collection

Download our Postman collection for easy API testing:

```bash
# Import collection
curl -o knowledgepack-api.json https://api.knowledgepack.com/postman/collection.json
```

### API Testing Tools

- **Postman**: GUI-based API testing
- **Insomnia**: Alternative API client
- **HTTPie**: Command-line HTTP client
- **Paw**: Mac-based API client

### Sandbox Environment

Use our sandbox environment for testing:

- **Base URL**: `https://sandbox.knowledgepack.com/v1`
- **API Key**: Use test API keys (prefix: `test_`)
- **Rate Limits**: Relaxed for testing
- **Data**: Test data is reset daily

## Migration Guide

### Upgrading from v1 to v2

Key changes in API v2:

1. **Authentication**: OAuth 2.0 preferred over API keys
2. **Pagination**: Cursor-based instead of offset-based
3. **Webhooks**: Enhanced payload structure
4. **Search**: Improved search with filters and faceting

### Breaking Changes

- `GET /documents` now returns paginated results by default
- `POST /documents` requires explicit `status` field
- Webhook payload structure changed
- Some field names updated for consistency

## Support and Resources

### Getting Help

- **Documentation**: [https://docs.knowledgepack.com/api](https://docs.knowledgepack.com/api)
- **API Status**: [https://status.knowledgepack.com](https://status.knowledgepack.com)
- **Community Forum**: [https://community.knowledgepack.com](https://community.knowledgepack.com)
- **Support Email**: [api-support@knowledgepack.com](mailto:api-support@knowledgepack.com)

### Changelog

Stay updated with API changes:

- **Changelog**: [https://docs.knowledgepack.com/changelog](https://docs.knowledgepack.com/changelog)
- **Breaking Changes**: [https://docs.knowledgepack.com/breaking-changes](https://docs.knowledgepack.com/breaking-changes)
- **Migration Guides**: [https://docs.knowledgepack.com/migrations](https://docs.knowledgepack.com/migrations)

For detailed examples and advanced use cases, explore our [API cookbook](/api-cookbook) and [integration guides](/integrations).
